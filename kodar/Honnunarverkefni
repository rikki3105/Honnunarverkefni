import digitalio
import board
import time
from board import *
import glob
import adafruit_dht
import RPi.GPIO as GPIO
import os
import datetime


###### Kveikjum á viftu ######

# Configuration
RELAY_FAN_GPIO_PIN = 26 # BCM pin used to turn RELAY for FAN ON/OFF


try:
	GPIO.setwarnings(False)
	GPIO.setmode(GPIO.BCM)
  # Setting up relay for FAN
	GPIO.setup(RELAY_FAN_GPIO_PIN, GPIO.OUT, initial=GPIO.HIGH) # HIGH MEANS RELAY IS OFF

	GPIO.output(RELAY_FAN_GPIO_PIN,GPIO.LOW) # Turn the FAN ON
	print("FAN IS ON")
	time.sleep(5)
  except KeyboardInterrupt:
	GPIO.cleanup() # resets all GPIO ports used by this function
#### Setjum Duty Cycle ####

	duty_cycle1 = 10
		setFanSpeed(duty_cycle1)
		time.sleep(8)

###### Hitanemi ######

dhtDevice = adafruit_dht.DHT22(board.D5)

teljari = 1
upphafshitastig = dhtDevice.temperature # Upphafshitastig
deltaT = 0 # breyta til að fylgjast með breyting á hitastigi

while (teljari < 11):
    try:
        hitastig = dhtDevice.temperature
        deltaT = hitastig - upphafshitastig
        print("Hitastig: {:.1f} C  mæling nr. {}".format(hitastig, teljari))

    except RuntimeError as error:
        # Villur koma reglulega upp - getur verið erfitt að lesa gildi nemans, bara reyna aftur
        print(error.args[0])
        time.sleep(2.0)
        continue
    except Exception as error:
        dhtDevice.exit()
        raise error

    time.sleep(2.0)
    teljari = teljari + 1
